# Merging and eda

## Данные

- Для каждого датасета дропаем ненужные и лишние колонки
- Дропаем дубликаты в каждом датасете
- Добавляем в каждый датасет колонку с название сайта

### price and pricecurrency

- Если есть колонка `price` и `pricecurreny` - очищаем и приводим `price` к float

### title and brand

- В нескольких датасетах название `title` кроссовок идёт в формате: `{бренд} {модель} "{цвет}"`,
поэтому можно разделить модель и цвет по кавычкам.
- Чтобы хорошо смерджилоcь, нужно также убрать бренд из начала `title`.
- Для этого берём все колонки `brand` из всех датасетов, создаем список всех брендов, а также их комбинаций по 2.
Комбинации по два нужны, чтобы удалились коллабы.
- Далее создали файлик `data/merged/other/color_words.txt` и поместили туда основные слова-цвета на английском.
- Наконец можно очистить колонку `title` - сначала удаляются лишние символы, греческие буквы и тд., далее слева удаляем бренд, справа удаляем color.
- `brand` просто чистим от лишних символов

## Merge
- Мерджить будем по очищенной колонке `title`.
- Делаем `groupby` по этой колонке, в аггрегациях ставим для всех колонок `list` и получаем `data/merged/metadata/full_dataset.csv`
- Сделаем lite версию датасета `data/merged/metadata/main_dataset.csv`, в котором оставили только бренд, название и пути к картинкам. (Что делать с остальными колонками не придумали пока что)
- По итогу получаем основной датасет.
- В нём три колонки - `title`, `brand`, `images_path`, где `images_path` это `list` с путями спаршенных картинок.
- Проходимся по этому списку и собираем все картинки по брендам и по моделям в отдельные папки.
- Итого у нас получилось:
  - Смерджить 11819 моделей в 4916, картинки расположены в `data/merged/images/by-brands`
  - Смерджить по брендам и получить 84 бренда `data/merged/images/by-models`
  - Наблюдается большой дисбаланс по количеству картинок в разных брендах
  - Кстати, когда мёрджим, то удаляем дубликаты картинок, надо бы ещё похожие почистить.
  - Всего в одном мердже около 50к картинок.

## Images
